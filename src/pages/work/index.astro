---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Section from "../../components/Section.astro";
import Card from "../../components/Card.astro";
import { getCollection } from "astro:content";

const isProd = import.meta.env.PROD;
const work = (await getCollection("work", ({ data }) => (isProd ? !data.draft : true))).sort(
  (a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf()
);
---
<BaseLayout
  title="Work | Rivermark Group"
  description="Selected consulting engagements across analytics, operations, and automation."
>
  <Section
    eyebrow="Work"
    title="Selected engagements"
    intro="Anonymized examples of the outcomes we help teams achieve."
  >
    <div class="grid gap-6 md:grid-cols-2">
      {work.map((item) => (
        <Card>
          <p class="text-xs uppercase tracking-[0.2em] text-ink-600">
            {item.data.publishDate.toISOString().slice(0, 10)}
          </p>
          <h3 class="mt-3 text-xl">{item.data.title}</h3>
          <p class="mt-3 text-sm text-ink-600">{item.data.description}</p>
          <a
            href={`/work/${item.slug}`}
            class="mt-6 inline-flex text-sm font-semibold text-ink-900"
          >
            Read case study â†’
          </a>
        </Card>
      ))}
    </div>
  </Section>
</BaseLayout>
