---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Section from "../../components/Section.astro";
import Card from "../../components/Card.astro";
import { getCollection } from "astro:content";

const isProd = import.meta.env.PROD;
const insights = (await getCollection("insights", ({ data }) => (isProd ? !data.draft : true))).sort(
  (a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf()
);
---
<BaseLayout
  title="Insights | Rivermark Group"
  description="Research and perspectives on analytics, operations, and automation."
>
  <Section
    eyebrow="Insights"
    title="Perspectives from the field"
    intro="Practical thinking on data, operations, and automation for leadership teams."
  >
    <div class="grid gap-6 md:grid-cols-2">
      {insights.map((item) => (
        <Card>
          <p class="text-xs uppercase tracking-[0.2em] text-ink-600">
            {item.data.publishDate.toISOString().slice(0, 10)}
          </p>
          <h3 class="mt-3 text-xl">{item.data.title}</h3>
          <p class="mt-3 text-sm text-ink-600">{item.data.description}</p>
          <a
            href={`/insights/${item.slug}`}
            class="mt-6 inline-flex text-sm font-semibold text-ink-900"
          >
            Read insight â†’
          </a>
        </Card>
      ))}
    </div>
  </Section>
</BaseLayout>
